From 65cacd639abbe64741678c3f1f9dbd76eef2a0c5 Mon Sep 17 00:00:00 2001
From: Lin Cheng <lin_cheng@dell.com>
Date: Tue, 7 Jun 2022 15:21:38 +0800
Subject: [PATCH] fix allocator with partition issues on Thin OS

allocator with partition has some issues without memset
---
 base/allocator/partition_allocator/page_allocator.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/base/allocator/partition_allocator/page_allocator.h b/base/allocator/partition_allocator/page_allocator.h
index 2f0e076159158..c0743057497d8 100644
--- a/base/allocator/partition_allocator/page_allocator.h
+++ b/base/allocator/partition_allocator/page_allocator.h
@@ -194,7 +194,7 @@ BASE_EXPORT void DecommitAndZeroSystemPages(void* address, size_t length);
 // Whether decommitted memory is guaranteed to be zeroed when it is
 // recommitted. Do not assume that this will not change over time.
 constexpr BASE_EXPORT bool DecommittedMemoryIsAlwaysZeroed() {
-#if BUILDFLAG(IS_APPLE)
+#if 1 || BUILDFLAG(IS_APPLE)
   return false;
 #else
   return true;
-- 
2.25.1

